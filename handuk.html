<!DOCTYPE html>
<html> 

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>PriceComparator</title>
        <meta name="description" content="Webpage ini menampilkan price comparator antara BukaLapak dan Orami">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shorcut icon" type="image/png" href="favicon.png">

        <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"></script>
        
    <link rel="stylesheet" href="bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    </head>

    <body>
        <!-- Main -->
    <!-- MENU -->
    <nav class="navbar navbar-expand-sm navbar-light">
        <div class="container">
            <a class="navbar-brand" href="index.html">Price Comparator</a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item">
                        <a href="developer.html" class="nav-link">Developer</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

<div class="container">
    <h2>Kategori Handuk</h2>
        <div style="margin:40px;">
          <div class="jumbotron"  style="padding:40px;margin-top:100px;">
            <form method = "GET" action = "#">
                <div id ="tombolhasil" style="text-align: center; margin-top:35px">
                    <button class="btn btn-primary" style="width:190px;" id = "gethasil">Show Bukalapak</button>
                    <button class="btn btn-primary" style="width:190px;" id = "gethasil2">Show Orami</button>
                </div>
            </form>

            <div class="compare">
                    <input id = "compare" type="button" value="Compare">
             </div>
            <!-- Tabel Hasil -->                   
            <table id="tabelhasil" class="table table-bordered" style="margin-top: 10px; width: 400px; text-align: center; margin-left: 275px; ">
                <thead id="headtabelhasil">
                    <tr>
                        <th>Nama</th>
                        <th>Harga</th>
                    </tr>
                </thead>
                <tbody id="bodyhasil"></tbody>
            </table>
             <!-- Tabel Hasil -->                   
             <table id="tabelhasil2" class="table table-bordered" style="margin-top: 10px; width: 400px; text-align: center; margin-left: 275px; ">
                    <thead id="headtabelhasil2">
                        <tr>
                            <th>Nama</th>
                            <th>Harga</th>
                        </tr>
                    </thead>
                    <tbody id="bodyhasil2"></tbody>
                </table>
        </div>
        
 </div>
</div>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script crossorigin="anonymous" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
$(document).ready(function(){

var price = []
$("#gethasil").click(function() {
        tabmodiv=document.getElementById('bodyhasil');
            var endpoint = 'http://52.23.248.58:8080/tas';
            content=""
            $.ajax({
            url: 'http://52.23.248.58:8080/tas',
            type: 'get',
            crossDomain: true,
            dataType: 'json',
            success: function (response) {
                console.log(response);
                $.each(response.slice(0, 20), function (key, value) {
                    content+=
                        "<tr>" +
                            "<td>"+value.nama+"</th>\n" +
                            "<td>"+value.harga+"</th>\n" +
                            price.push(value.harga);
                        "</tr>"
                });
                $('#bodyhasil').html(content);
                console.log(price);
                var maxpricebukalapak = BiggerPrice(price);
                console.log(maxpricebukalapak)
            },
            error: function (response) {
                console.log(response);
                
            }
        })
})

function BiggerPrice(price)
   {
     return function(evalue, index, array)
     {
     return (evalue >= val);
     };
   }

$("compare").click(BiggerPrice(price));

$("#gethasil2").click(function() {
        tabmodiv=document.getElementById('bodyhasil2');
            content=""
            $.ajax({
            url: 'http://54.88.35.235:8000/handuk',
            type: 'get',
            crossDomain: true,
            dataType: 'json',
            success: function (response) {
                console.log(response);
                $.each(response.slice(0, 20), function (key, value) {
                    content+=
                        "<tr>" +
                            "<td>"+value.nama+"</th>\n" +
                            "<td>"+value.harga+"</th>\n" +
                        "</tr>"
                });
                $('#bodyhasil2').html(content);
            },
            error: function (response) {
                console.log(response);
            }
        })
})
})
</script>
</body>
</html>